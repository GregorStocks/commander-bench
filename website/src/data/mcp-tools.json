[
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "action_type": {
          "description": "The callback method that was handled",
          "type": "string"
        },
        "success": {
          "description": "Whether the action was executed successfully",
          "type": "boolean"
        },
        "action_taken": {
          "description": "Description of what was done (e.g. \"passed_priority\")",
          "type": "string"
        },
        "error": {
          "description": "Error message",
          "type": "string"
        }
      }
    },
    "examples": [
      {
        "label": "Success",
        "value": "{\n  \"success\": true,\n  \"action_type\": \"GAME_SELECT\",\n  \"action_taken\": \"passed_priority\"\n}"
      },
      {
        "label": "No pending action",
        "value": "{\n  \"success\": false,\n  \"error\": \"No pending action\"\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "default_action",
    "description": "Execute default action (pass priority or first available choice)"
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "cursor": {
          "description": "Cursor to pass to the next get_game_log call",
          "type": "integer"
        },
        "cursor_reset": {
          "description": "Whether requested cursor was too old and had to be reset to oldest retained log offset",
          "type": "boolean"
        },
        "log": {
          "description": "Game log text (may be truncated if max_chars was set)",
          "type": "string"
        },
        "truncated": {
          "description": "Whether older content was omitted",
          "type": "boolean"
        },
        "total_length": {
          "description": "Total length of the full game log in characters",
          "type": "integer"
        }
      }
    },
    "examples": [
      {
        "label": "Truncated log",
        "value": "{\n  \"log\": \"Turn 3 - Player1: Mountain entered the battlefield...\",\n  \"total_length\": 5234,\n  \"truncated\": true,\n  \"cursor\": 5234\n}"
      },
      {
        "label": "Cursor delta",
        "value": "{\n  \"log\": \"Player2 casts Swords to Plowshares targeting Goblin Guide.\",\n  \"total_length\": 5301,\n  \"truncated\": false,\n  \"cursor\": 5301\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "cursor": {
          "description": "Cursor offset from previous get_game_log call. Returns new log text since this offset.",
          "type": "integer"
        },
        "max_chars": {
          "description": "Max characters to return (0 or omit for all)",
          "type": "integer"
        }
      }
    },
    "name": "get_game_log",
    "description": "Get game log text. Returns log, total_length, truncated. Use max_chars for recent entries only."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "success": {
          "description": "Whether the message was sent",
          "type": "boolean"
        }
      }
    },
    "examples": [
      {
        "label": "Success",
        "value": "{\n  \"success\": true\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "message": {
          "description": "Message to send",
          "type": "string"
        }
      },
      "required": [
        "message"
      ]
    },
    "name": "send_chat_message",
    "description": "Send a chat message to the game"
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "combat_phase": {
          "description": "\"declare_attackers\" or \"declare_blockers\"",
          "type": "string"
        },
        "actions_passed": {
          "description": "Number of priority passes performed",
          "type": "integer"
        },
        "has_playable_cards": {
          "description": "Whether you have playable cards in hand",
          "type": "boolean"
        },
        "action_type": {
          "description": "XMage callback method name",
          "type": "string"
        },
        "recent_chat": {
          "description": "Chat messages received since last check",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "timeout": {
          "description": "Whether the operation timed out",
          "type": "boolean"
        },
        "action_pending": {
          "description": "Whether a decision-requiring action was found",
          "type": "boolean"
        },
        "player_dead": {
          "description": "Whether you died during priority passing",
          "type": "boolean"
        }
      }
    },
    "examples": [
      {
        "label": "Playable cards found",
        "value": "{\n  \"action_pending\": true,\n  \"action_type\": \"GAME_SELECT\",\n  \"actions_passed\": 3,\n  \"has_playable_cards\": true\n}"
      },
      {
        "label": "Combat phase",
        "value": "{\n  \"action_pending\": true,\n  \"action_type\": \"GAME_SELECT\",\n  \"actions_passed\": 5,\n  \"has_playable_cards\": false,\n  \"combat_phase\": \"declare_attackers\"\n}"
      },
      {
        "label": "Timeout",
        "value": "{\n  \"action_pending\": false,\n  \"actions_passed\": 12,\n  \"timeout\": true\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "timeout_ms": {
          "description": "Max milliseconds to wait (default 30000)",
          "type": "integer"
        }
      }
    },
    "name": "pass_priority",
    "description": "Auto-pass priority until you need to make a decision: playable cards, combat (declare attackers/blockers), or non-priority actions. Returns action_pending, action_type, actions_passed, has_playable_cards, combat_phase. On timeout: action_pending=false, timeout=true."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "cursor": {
          "description": "Cursor for the latest known game state",
          "type": "integer"
        },
        "phase": {
          "description": "Current phase (e.g. PRECOMBAT_MAIN, COMBAT)",
          "type": "string"
        },
        "priority_player": {
          "description": "Name of the player who currently has priority",
          "type": "string"
        },
        "stack": {
          "description": "Stack objects: name, rules, target_count",
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "active_player": {
          "description": "Name of the player whose turn it is",
          "type": "string"
        },
        "players": {
          "description": "Player objects: name, life, library_size, hand_size, is_active, is_you, hand (yours only), battlefield, graveyard, exile, mana_pool, counters, commanders",
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "available": {
          "description": "Whether game state is available",
          "type": "boolean"
        },
        "unchanged": {
          "description": "True when the provided cursor already matches the latest state",
          "type": "boolean"
        },
        "step": {
          "description": "Current step within the phase",
          "type": "string"
        },
        "combat": {
          "description": "Combat groups: attackers, blockers, blocked, defending",
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "turn": {
          "description": "Current turn number",
          "type": "integer"
        },
        "error": {
          "description": "Error message",
          "type": "string"
        }
      }
    },
    "examples": [
      {
        "label": "Mid-game state",
        "value": "{\n  \"available\": true,\n  \"turn\": 4,\n  \"phase\": \"PRECOMBAT_MAIN\",\n  \"step\": \"PRECOMBAT_MAIN\",\n  \"active_player\": \"Player1\",\n  \"priority_player\": \"Player1\",\n  \"players\": [\n    {\n      \"name\": \"Player1\",\n      \"life\": 18,\n      \"library_size\": 49,\n      \"hand_size\": 5,\n      \"is_active\": true,\n      \"is_you\": true,\n      \"hand\": [\n        {\n          \"name\": \"Lightning Bolt\",\n          \"mana_cost\": \"{R}\",\n          \"mana_value\": 1,\n          \"playable\": true\n        },\n        {\n          \"name\": \"Mountain\",\n          \"mana_value\": 0,\n          \"is_land\": true,\n          \"playable\": true\n        }\n      ],\n      \"battlefield\": [\n        {\n          \"name\": \"Mountain\",\n          \"tapped\": false\n        },\n        {\n          \"name\": \"Goblin Guide\",\n          \"tapped\": false,\n          \"power\": 2,\n          \"toughness\": 2\n        }\n      ],\n      \"mana_pool\": {\n        \"R\": 0\n      }\n    },\n    {\n      \"name\": \"Player2\",\n      \"life\": 20,\n      \"library_size\": 52,\n      \"hand_size\": 7,\n      \"is_active\": false,\n      \"is_you\": false,\n      \"battlefield\": [\n        {\n          \"name\": \"Island\",\n          \"tapped\": false\n        }\n      ]\n    }\n  ],\n  \"stack\": []\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "cursor": {
          "description": "State cursor from previous get_game_state call. If unchanged, returns a compact payload.",
          "type": "integer"
        }
      }
    },
    "name": "get_game_state",
    "description": "Get full game state: turn, phase, players, stack, combat. Each player has life, mana_pool, hand (yours only), battlefield (name, tapped, P/T, counters, token/copy/face_down flags), graveyard, exile, commanders."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "cards": {
          "description": "Array of {name, rules} or {name, error} per card",
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "success": {
          "description": "Whether the lookup succeeded",
          "type": "boolean"
        },
        "name": {
          "description": "Card name",
          "type": "string"
        },
        "rules": {
          "description": "Oracle text lines",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "error": {
          "description": "Error message",
          "type": "string"
        }
      }
    },
    "examples": [
      {
        "label": "Single card",
        "value": "{\n  \"success\": true,\n  \"name\": \"Lightning Bolt\",\n  \"rules\": [\n    \"Deal 3 damage to any target.\"\n  ]\n}"
      },
      {
        "label": "Batch card_names lookup",
        "value": "{\n  \"success\": true,\n  \"cards\": [\n    {\n      \"name\": \"Lightning Bolt\",\n      \"rules\": [\n        \"Deal 3 damage to any target.\"\n      ]\n    },\n    {\n      \"name\": \"Counterspell\",\n      \"rules\": [\n        \"Counter target spell.\"\n      ]\n    }\n  ]\n}"
      },
      {
        "label": "Batch object_ids lookup",
        "value": "{\n  \"success\": true,\n  \"cards\": [\n    {\n      \"object_id\": \"abc-123\",\n      \"name\": \"Lightning Bolt\",\n      \"rules\": [\n        \"Deal 3 damage to any target.\"\n      ]\n    },\n    {\n      \"object_id\": \"def-456\",\n      \"error\": \"not found\"\n    }\n  ]\n}"
      },
      {
        "label": "Not found",
        "value": "{\n  \"success\": false,\n  \"error\": \"not found\"\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "object_ids": {
          "description": "Batch in-game object UUID lookup",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "card_name": {
          "description": "Single card name lookup",
          "type": "string"
        },
        "card_names": {
          "description": "Batch card name lookup",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "object_id": {
          "description": "UUID of an in-game object",
          "type": "string"
        }
      }
    },
    "name": "get_oracle_text",
    "description": "Get oracle text (rules) for cards. Provide exactly one of: card_name (single), card_names (batch array), object_id (in-game object), or object_ids (batch array of in-game objects). Single returns {name, rules}. Batch returns {cards: [{name, rules}, ...]}."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "combat_phase": {
          "description": "\"declare_attackers\" or \"declare_blockers\"",
          "type": "string"
        },
        "action_type": {
          "description": "XMage callback method name",
          "type": "string"
        },
        "players": {
          "description": "Life total summary (e.g. \"You(20), Opp(18)\")",
          "type": "string"
        },
        "min_amount": {
          "description": "Minimum allowed value",
          "type": "integer"
        },
        "response_type": {
          "description": "How to respond: \"select\", \"boolean\", \"index\", \"amount\", \"pile\", or \"multi_amount\"",
          "type": "string"
        },
        "untapped_lands": {
          "description": "Number of untapped lands",
          "type": "integer"
        },
        "message": {
          "description": "Human-readable prompt from XMage",
          "type": "string"
        },
        "mana_pool": {
          "description": "Current mana pool {R, G, U, W, B, C}",
          "type": "object"
        },
        "timeout": {
          "description": "Whether the operation timed out",
          "type": "boolean"
        },
        "action_pending": {
          "description": "Whether an action is pending (false if nothing to do)",
          "type": "boolean"
        },
        "actions_passed": {
          "description": "Number of priority passes performed before the decision",
          "type": "integer"
        },
        "context": {
          "description": "Turn/phase context (e.g. \"T3 PRECOMBAT_MAIN (Player1) YOUR_MAIN\")",
          "type": "string"
        },
        "max_amount": {
          "description": "Maximum allowed value",
          "type": "integer"
        },
        "recent_chat": {
          "description": "Chat messages received since last check",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "choices": {
          "description": "Structured choices with index, name, and type-specific fields (action/mana_cost/power/toughness for cards; choice_type for combat/mana; target_type/controller/tapped for targets)",
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "your_hand": {
          "description": "Hand cards with name, mana_cost, mana_value",
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "examples": [
      {
        "label": "Select (play cards)",
        "value": "{\n  \"action_pending\": true,\n  \"action_type\": \"GAME_SELECT\",\n  \"message\": \"Select card to play or pass priority\",\n  \"response_type\": \"select\",\n  \"context\": \"T3 PRECOMBAT_MAIN (Player1) YOUR_MAIN\",\n  \"players\": \"You(20), Opp(18)\",\n  \"choices\": [\n    {\n      \"index\": 0,\n      \"name\": \"Lightning Bolt\",\n      \"action\": \"cast\",\n      \"mana_cost\": \"{R}\",\n      \"mana_value\": 1\n    },\n    {\n      \"index\": 1,\n      \"name\": \"Mountain\",\n      \"action\": \"land\"\n    }\n  ],\n  \"untapped_lands\": 2\n}"
      },
      {
        "label": "Boolean (mulligan)",
        "value": "{\n  \"action_pending\": true,\n  \"action_type\": \"GAME_ASK\",\n  \"message\": \"Mulligan hand?\",\n  \"response_type\": \"boolean\",\n  \"context\": \"T0 PREGAME\",\n  \"players\": \"You(20), Opp(20)\",\n  \"your_hand\": [\n    {\n      \"name\": \"Mountain\",\n      \"mana_value\": 0,\n      \"is_land\": true\n    },\n    {\n      \"name\": \"Lightning Bolt\",\n      \"mana_cost\": \"{R}\",\n      \"mana_value\": 1\n    }\n  ],\n  \"hand_size\": 7,\n  \"land_count\": 3\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "timeout_ms": {
          "description": "Max milliseconds to wait for a decision. When set, auto-passes priority until a decision is needed (like pass_priority + get_action_choices in one call). When omitted, returns immediately.",
          "type": "integer"
        }
      }
    },
    "name": "get_action_choices",
    "description": "Get available choices for the current pending action. Call before choose_action. With timeout_ms: blocks like pass_priority until a decision is needed, then returns choices in one call. Without timeout_ms: returns immediately (action_pending=false if nothing to do). Includes context (phase/turn), players (life totals), and land_drops_used (during your main phase). response_type: select (cards to play, attackers, blockers), boolean (yes/no), index (target/ability), amount, pile, or multi_amount. During combat: combat_phase indicates declare_attackers or declare_blockers."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "retryable": {
          "description": "Whether the action can be retried with different parameters",
          "type": "boolean"
        },
        "success": {
          "description": "Whether the action was accepted",
          "type": "boolean"
        },
        "action_taken": {
          "description": "Description of what was done (e.g. \"selected_0\", \"yes\", \"passed_priority\")",
          "type": "string"
        },
        "warning": {
          "description": "Warning (e.g. possible game loop detected)",
          "type": "string"
        },
        "error_code": {
          "description": "Machine-readable error code: no_pending_action, missing_param, index_out_of_range, invalid_choice, internal_error, unknown_action_type",
          "type": "string"
        },
        "error": {
          "description": "Error message",
          "type": "string"
        }
      }
    },
    "examples": [
      {
        "label": "Index selection",
        "value": "{\n  \"success\": true,\n  \"action_taken\": \"selected_0\"\n}"
      },
      {
        "label": "Boolean answer",
        "value": "{\n  \"success\": true,\n  \"action_taken\": \"no\"\n}"
      },
      {
        "label": "Error",
        "value": "{\n  \"success\": false,\n  \"error\": \"Index 5 out of range (call get_action_choices first)\",\n  \"error_code\": \"index_out_of_range\",\n  \"retryable\": true\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "amount": {
          "description": "Amount value (for get_amount actions)",
          "type": "integer"
        },
        "answer": {
          "description": "Yes/No response. For GAME_ASK: true means YES to the question, false means NO. For mulligan: true = YES MULLIGAN (discard hand, draw new cards), false = NO KEEP (keep this hand). For GAME_SELECT: false = pass priority (done playing cards this phase), true = confirm combat (done declaring attackers/blockers). Also false to cancel target/mana selection.",
          "type": "boolean"
        },
        "amounts": {
          "description": "Multiple amount values (for multi_amount actions)",
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "pile": {
          "description": "Pile number: 1 or 2 (for pile choices)",
          "type": "integer"
        },
        "index": {
          "description": "Choice index from get_action_choices (for target/ability/choice and mana source/pool choices)",
          "type": "integer"
        },
        "text": {
          "description": "Text value for GAME_CHOOSE_CHOICE (use instead of index to pick any option by name, e.g. a creature type not in the filtered list)",
          "type": "string"
        }
      }
    },
    "name": "choose_action",
    "description": "Respond to pending action. Use index to pick a choice (card, attacker, blocker, target, ability, mana source). Use answer for yes/no, pass priority, or confirm combat (true=confirm attackers/blockers). Call get_action_choices first."
  },
  {
    "outputSchema": {
      "type": "object",
      "properties": {
        "cards": {
          "description": "Main deck cards, one per line (e.g. \"4x Lightning Bolt\")",
          "type": "string"
        },
        "sideboard": {
          "description": "Sideboard cards, same format",
          "type": "string"
        },
        "error": {
          "description": "Error message",
          "type": "string"
        }
      }
    },
    "examples": [
      {
        "label": "Decklist loaded",
        "value": "{\n  \"cards\": \"4x Lightning Bolt\\n4x Goblin Guide\\n20x Mountain\",\n  \"sideboard\": \"2x Smash to Smithereens\\n3x Eidolon of the Great Revel\"\n}"
      }
    ],
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "get_my_decklist",
    "description": "Get your original decklist (card names and quantities)."
  }
]
