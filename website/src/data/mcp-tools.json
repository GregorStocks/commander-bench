[
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "is_action_on_me",
    "description": "Check if game action is currently required from this player. Returns action_pending (boolean), and if true: action_type, game_id, and message."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "take_action",
    "description": "Execute default action (pass priority or first available choice)"
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "max_chars": {
          "description": "Max characters to return (0 or omit for all)",
          "type": "integer"
        }
      }
    },
    "name": "get_game_log",
    "description": "Get the game log text. Returns log (string), total_length, returned_length, and truncated (boolean). If max_chars is set, returns the most recent max_chars characters."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "message": {
          "description": "Message to send",
          "type": "string"
        }
      },
      "required": [
        "message"
      ]
    },
    "name": "send_chat_message",
    "description": "Send a chat message to the game"
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "timeout_ms": {
          "description": "Max milliseconds to wait (default 15000)",
          "type": "integer"
        }
      }
    },
    "name": "wait_for_action",
    "description": "Block until a game action is required from this player, or until timeout. Returns the same info as is_action_on_me. Use this instead of polling is_action_on_me in a loop."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "timeout_ms": {
          "description": "Max milliseconds to wait (default 30000)",
          "type": "integer"
        }
      }
    },
    "name": "pass_priority",
    "description": "Auto-pass priority until you can actually do something. Skips empty priorities where you have no playable cards, and returns when: (1) you have cards you can play, or (2) a non-priority decision is needed (mulligan, target selection, etc.). Call this after making your play or passing to skip ahead efficiently. Returns action_pending, action_type, actions_passed (count of auto-passed priorities), and has_playable_cards (true if you have non-mana cards to play). On timeout: action_pending=false, timeout=true."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "min_new_chars": {
          "description": "Min new log characters to trigger return (default 50)",
          "type": "integer"
        },
        "timeout_ms": {
          "description": "Max milliseconds to wait (default 10000)",
          "type": "integer"
        }
      }
    },
    "name": "auto_pass_until_event",
    "description": "Auto-handle all game actions (pass/default) and block until the game state changes meaningfully (turn change, life total change, permanents entering/leaving, cards going to graveyard). Returns event_occurred (boolean), new_log (description of changes), new_chars, and actions_taken (count). Use this in a loop to observe the game."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "get_game_state",
    "description": "Get structured game state: turn, phase/step, active_player, priority_player, and stack. Each player has: name, life, library_size, hand_size, is_active, is_you, battlefield, graveyard, and optionally counters and commanders. Your hand includes card details with playable flag. Battlefield permanents include tapped state, types, power/toughness, loyalty, counters, and summoning_sickness."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "card_name": {
          "description": "Card name for database lookup (e.g., 'Lightning Bolt')",
          "type": "string"
        },
        "object_id": {
          "description": "UUID of an in-game object for dynamic rules",
          "type": "string"
        }
      }
    },
    "name": "get_oracle_text",
    "description": "Get oracle text (rules) for a card by name or in-game object ID. Provide exactly one of card_name or object_id (not both). Returns success, source ('database' or 'game'), name, and rules. Database lookups also return set_code and card_number."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {}
    },
    "name": "get_action_choices",
    "description": "Get detailed information about the current pending action including all available choices with human-readable descriptions. Call this before choose_action to see what options are available. Always includes phase context: turn, phase, step, active_player, is_my_main_phase, players. Returns response_type: 'select' (GAME_SELECT: playable cards by index, pass with answer=false; GAME_PLAY_MANA: mana sources with choice_type 'tap_source'/'mana_source'/'pool_mana'), 'boolean' (yes/no; mulligan includes your_hand with card details), 'index' (target/ability/choice; target includes required and can_cancel), 'amount' (includes min/max), 'pile' (includes pile1/pile2 card names), or 'multi_amount' (includes items array with per-item min/max/default)."
  },
  {
    "inputSchema": {
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "amount": {
          "description": "Amount value (for get_amount actions)",
          "type": "integer"
        },
        "answer": {
          "description": "Yes/No response (for ask/select). Also false to cancel target/mana selection.",
          "type": "boolean"
        },
        "amounts": {
          "description": "Multiple amount values (for multi_amount actions)",
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "pile": {
          "description": "Pile number: 1 or 2 (for pile choices)",
          "type": "integer"
        },
        "index": {
          "description": "Choice index from get_action_choices (for target/ability/choice and mana source/pool choices)",
          "type": "integer"
        }
      }
    },
    "name": "choose_action",
    "description": "Respond to the current pending action with a specific choice. Call get_action_choices first to see available options. For GAME_SELECT (response_type=select): 'index' to play a card, or 'answer: false' to pass priority. For GAME_PLAY_MANA: 'index' to tap a mana source or spend pool mana, 'answer: false' to cancel. For GAME_TARGET: 'index' to select target, 'answer: false' to cancel. For GAME_ASK: 'answer' true/false. For GAME_CHOOSE_ABILITY/CHOICE: 'index'. For GAME_GET_AMOUNT: 'amount'. For GAME_GET_MULTI_AMOUNT: 'amounts' array. For GAME_CHOOSE_PILE: 'pile' (1 or 2)."
  }
]
