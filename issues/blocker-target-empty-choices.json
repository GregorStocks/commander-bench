{
  "title": "GAME_TARGET returns empty choices for blocker-to-attacker assignment",
  "description": "When a player selects a creature to block with (via GAME_SELECT), XMage sends a GAME_TARGET \"Select attacker to block\" with the set of legal attackers to assign the blocker to. Sometimes this set is empty despite attackers being present.\n\nEvidence (game_20260211_002821, Gem3F Libby, T9):\n- Sonnet Timmy attacks Libby with Lightning Rager 11/7 (5/1 + Empyrial Plate), Edric 2/2, Squid Token 1/1\n- Libby selects Hellkite Tyrant 9/5 (flying, trample) as blocker\n- Server sends GAME_TARGET with empty targets — LLM loops 857 times over 16 minutes\n- On T6, same flow worked fine: Libby blocked with Meteor Golem 3/3 (no flying) and got 2 choices\n\nServer code path (HumanPlayer.selectCombatGroup):\n- allAttackers = TargetAttackingCreature.possibleTargets() — should find all 3 attackers\n- For each attacker: findGroup(attackerId) then group.canBlock(blocker, game)\n- CombatGroup.canBlock checks defendingPlayerId == blocker.getControllerId(), then blocker.canBlock(attackerId)\n\nCode review found no obvious bug — flying on a blocker doesn't restrict what it can block (confirmed in FlyingEffect.java: canBlock returns true, only canBeBlocked restricts non-flying blockers from blocking flyers). None of the attackers have evasion, protection, or other blocking restrictions.\n\nRoot cause unknown. Debug logging added to HumanPlayer.selectCombatGroup to capture allAttackers count, defender match, and canBlock results when possibleAttackersToBlock is empty. Next occurrence will reveal which check fails.\n\nClient-side workaround: auto-cancel + combat fallback in BridgeCallbackHandler.java prevents the LLM loop.",
  "status": "open",
  "priority": 1,
  "type": "bug",
  "labels": ["headless-client", "combat"],
  "created_at": "2026-02-11T07:53:00.000000-08:00",
  "updated_at": "2026-02-11T00:00:00.000000-08:00"
}
