{
  "title": "Audit for additional Java 17+ modernization opportunities",
  "description": "Now that the project targets Java 17, audit Mage.Client.Headless and Mage.Client.Streaming for further modernization opportunities that weren't included in the initial upgrade.\n\nAreas to investigate:\n\n1. **var keyword** — ~50+ verbose local variable declarations (e.g. `Map<String, Object> result = new HashMap<>()` → `var result = new HashMap<String, Object>()`) across both modules. Evaluate whether the readability tradeoff is worth it on a case-by-case basis.\n\n2. **Text blocks** — Regex patterns in BridgeCallbackHandler use heavy escaping (e.g. `\\\\x7b`). Text blocks could help readability for multi-line strings and complex regex.\n\n3. **List.of() / Map.of()** — Most collection usage is mutable (loop-built), but there may be static/constant collections worth converting. The `McpToolRegistry.json()` helper already covers ordered map construction.\n\n4. **More switch expressions** — BridgeCallbackHandler has a large dispatch switch in the MCP callback handler (~600 lines) and several if/else chains in addJsonType/extractArg in McpToolRegistry that could become switch expressions.\n\n5. **Sealed classes** — Evaluate whether any class hierarchies would benefit from sealing.\n\n6. **Stream.toList()** — Java 16 added `stream.toList()` as a shorthand for `stream.collect(Collectors.toList())`.\n\nSource: Initial Java 17 upgrade PR.",
  "status": "open",
  "priority": 4,
  "type": "task",
  "labels": ["headless-client", "streaming-client"],
  "created_at": "2026-02-12T19:27:00.000000-08:00",
  "updated_at": "2026-02-12T19:27:00.000000-08:00"
}
