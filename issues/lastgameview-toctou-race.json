{
  "title": "TOCTOU race on volatile lastGameView in SkeletonCallbackHandler",
  "description": "SkeletonCallbackHandler.java has a volatile GameView field `lastGameView` (line 88) with compound check-then-use patterns:\n\n- Line 429: `if (lastGameView != null)` followed by multiple accesses to `lastGameView.getPhase()`, `lastGameView.getStep()`, etc. (lines 430-442, 451) without snapshotting\n- Line 510: `PlayableObjectsList playable = lastGameView != null ? lastGameView.getCanPlayObjects() : null;`\n- Lines 516-517: similar ternary pattern accessing `lastGameView.getTurn()` after null check\n\nNote: Line 180 already correctly snapshots with `GameView gv = lastGameView;` â€” the other sites should follow the same pattern.\n\nBetween the null check and subsequent method calls, another thread could set `lastGameView` to null, causing NullPointerException.\n\nFix: snapshot `lastGameView` into a local variable before each compound operation.",
  "status": "open",
  "priority": 3,
  "type": "bug",
  "labels": [
    "headless-client"
  ],
  "created_at": "2026-02-09T00:00:00.000000-08:00",
  "updated_at": "2026-02-09T00:00:00.000000-08:00"
}
