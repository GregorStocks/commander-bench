{
  "title": "Commander card displays as 'Unknown' in game state hand",
  "description": "In game_20260210_234529, Sonnet Valley's commander (Breena, the Demagogue) appeared as 'Unknown' in the hand throughout the game. The model could never identify its own commander card, leading to confused play — it accidentally cast Breena when trying to play a land, and couldn't understand mana payment prompts related to it.\n\nThe getGameState() method at BridgeCallbackHandler.java:2085 uses card.getDisplayName() directly without a null/empty fallback. The buildCardDescription() method (lines 1597-1601) correctly handles this with:\n```java\nString displayName = cv.getDisplayName();\nif (displayName == null) {\n    displayName = cv.getName() != null ? cv.getName() : \"Unknown\";\n}\n```\nBut getGameState() lacks this pattern, so if getDisplayName() returns null the card name is null in the JSON.\n\nEvidence:\n- ~/mage-bench-logs/game_20260210_234529/Sonnet Valley_pilot.log: 'Unknown' card referenced throughout (lines 74, 140-220, 260-310, 360-400)\n- Model says 'Wait, like, it's asking me about Opal Palace AGAIN? That's literally SO weird!' — confused by multi-step mana payment for the unnamed commander\n\nSource: BridgeCallbackHandler.java:2085 — card.getDisplayName() used without null fallback in getGameState() hand card serialization\n\nSuggested fix: Apply the same null-guard pattern used in buildCardDescription() to all getDisplayName() calls in getGameState(), particularly line 2085 for hand cards. Also check lines 2114, 2169, 2180, 2231 which use the same pattern.",
  "status": "open",
  "priority": 2,
  "type": "bug",
  "labels": ["headless-client"],
  "created_at": "2026-02-11T00:30:00.000000-08:00",
  "updated_at": "2026-02-11T00:30:00.000000-08:00"
}
