{
  "title": "Streaming spectator can't find deck files due to wrong working directory",
  "description": "The streaming spectator client (Mage.Client.Streaming) runs with CWD set to Mage.Client.Streaming/, but TablesPanel.findAiPuppeteerDeckFiles() looks for decks at relative path 'release/sample-decks/Commander' and fallback 'Mage.Client/release/sample-decks/Commander'. Neither resolves correctly from the Mage.Client.Streaming/ directory.\n\nThe Python orchestrator correctly resolves random deck paths and passes them via XMAGE_AI_PUPPETEER_PLAYERS_CONFIG, but the Java side's pickAiPuppeteerDecks() ignores resolved paths for CPU players and searches for files independently.\n\nThis causes 'AI puppeteer decks not found and N bot deck(s) needed. Exiting.' for any config with CPU players using deck='random'.\n\nReproduction:\n  make run                           # standard-dumb, 2 CPU players\n  make run CONFIG=modern-staller     # 1 CPU + 1 headless\n\nBoth fail with the deck-not-found error. This may be environment-specific (works on some machines if there's a symlink or different directory layout).\n\nSource: Mage.Client/src/main/java/mage/client/table/TablesPanel.java:1977 findAiPuppeteerDeckFiles()\n\nPossible fixes:\n- Use the resolved deck paths from XMAGE_AI_PUPPETEER_PLAYERS_CONFIG for CPU players instead of searching\n- Fix the relative path resolution to go up one directory (../Mage.Client/release/sample-decks/)\n- Pass the project root as a JVM property for deck resolution",
  "status": "open",
  "priority": 2,
  "type": "bug",
  "labels": ["streaming-client", "puppeteer"],
  "created_at": "2026-02-12T08:30:00.000000-08:00",
  "updated_at": "2026-02-12T08:30:00.000000-08:00"
}
